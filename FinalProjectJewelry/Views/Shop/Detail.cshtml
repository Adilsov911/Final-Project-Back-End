@using Microsoft.AspNetCore.Identity
@model ProductVM

@inject UserManager<AppUser> _userManager

@{ AppUser appUser = null;
    if (User.Identity.IsAuthenticated)
    {
        appUser = await _userManager.FindByNameAsync(User.Identity.Name);

    }
}

<section id="top-2">
    <div class="container d-flex tp">
        <span>Home /</span> <h6>Products</h6>
    </div>
</section>


<header id="detal" role="banner" aria-label="Heading">
    <section aria-label="Main content" role="main" class="product-detail">
        <div itemscope itemtype="http://schema.org/Product">

            <div class="shadow">
                <div class="_cont detail-top">
                    <div class="cols">
                        <div class="left-col">
                            <div class="thumbs">

                                @foreach (var item in Model.Product.ProductImages)
                                {

                                    <a class="thumb-image" href="" data-index="2">
                                        <span><img src="~/assest/img/Product/@item.Name" alt=""></span>
                                    </a>
                                }

                            </div>
                            <div class="big">
                                <div class="big-image w-100">
                                    <img src="~/assest/img/Product/@Model.Product.MainImage" alt="">
                                </div>
                                <div id="banner-gallery" class="swipe">
                                    <div class="swipe-wrap">
                                        <div style="background-image: url('~/assest/img/Product/10_16854be2-a731-4970-984e-7f6e483d2405_grande.png')"></div>
                                        <div style="background-image: url('~/assest/img/Product/11_68ab6d0f-109c-429b-a903-4cbf60257806_grande.png')"></div>
                                        <div style="background-image: url('~/assest/img/Product/2_119a31f2-2054-4483-93a3-841310e6bdfb_grande.jpg')"></div>
                                        <div style="background-image: url('~/assest/img/Product/6_03a522d6-f36a-4f59-a815-bbade4d87a6e_grande.png')"></div>
                                    </div>
                                </div>
                                <div class="detail-socials">
                                    <div class="social-sharing" data-permalink="http://html-koder-test.myshopify.com/products/tommy-hilfiger-t-shirt-new-york">
                                        <a target="_blank" class="share-facebook" title="Share"></a>
                                        <a target="_blank" class="share-twitter" title="Tweet"></a>
                                        <a target="_blank" class="share-pinterest" title="Pin it"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="right-col">
                            <h1 itemprop="name">Curabitur Cursus Dignis</h1>
                            <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
                                <meta itemprop="priceCurrency" content="USD">
                                <link itemprop="availability" href="http://schema.org/InStock">
                                <div class="price-shipping">
                                    <div class="price" id="price-preview" quickbeam="price" quickbeam-price="800">
                                        $@Model.Product.Price
                                    </div>
                                </div>
                                <div class="swatches">
                                    <div class="swatch clearfix" data-option-index="0">
                                        <div class="header">Size</div>
                                        @foreach (var item in Model.Product.ProductSizes)
                                        {

                                            <div data-value="M" class="swatch-element plain m available">
                                                <input id="swatch-0-m" type="radio" name="option-0" value="M" checked />
                                                <label for="swatch-0-m">
                                                    @item.Size.Name
                                                    <img class="crossed-out" src="//cdn.shopify.com/s/files/1/1047/6452/t/1/assets/soldout.png?10994296540668815886" />
                                                </label>
                                            </div>
                                        }


                                    </div>
                                    <div class="swatch clearfix" data-option-index="1">
                                        <div class="header">Color</div>
                                        @foreach (var item in Model.Product.ProductColors)
                                        {

                                            <div data-value="Blue" class="swatch-element color @item.Color.Name available">
                                                <div class="tooltip">@item.Color.Name</div>
                                                <input quickbeam="color" id="swatch-1-blue" type="radio" name="option-1" value="@item.Color.Name" checked />
                                                <label for="swatch-1-blue" style="border-color: @item.Color.Name;">
                                                    <img class="crossed-out" src="//cdn.shopify.com/s/files/1/1047/6452/t/1/assets/soldout.png?10994296540668815886" />
                                                    <span style="background-color: @item.Color.Name;"></span>
                                                </label>
                                            </div>
                                        }

                                    </div>
                                    <div class="guide">
                                        <a>Size guide</a>
                                    </div>
                                </div>
                                <!-- <form method="post" enctype="multipart/form-data" id="AddToCartForm"> -->
                                <form id="AddToCartForm">

                                    <div class="btn-and-quantity-wrap">
                                        <div class="btn-and-quantity">
                                            <div class="spinner">
                                                <span class="btn minus" data-id="2721888517"></span>
                                                <input type="text" id="updates_2721888517" name="quantity" value="1" class="quantity-selector">
                                                <input type="hidden" id="product_id" name="product_id" value="2721888517">
                                                <span class="q"></span>
                                                <span class="btn plus" data-id="2721888517"></span>
                                            </div>
                                            <div id="AddToCart" quickbeam="add-to-cart">
                                                <a style="color:white;" asp-controller="basket" asp-action="addtobasket" asp-route-id="@Model.Product.Id">Add to Cart</a>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <div class="tabs">
                                    <div class="tab-labels">
                                        <span data-id="1" class="active">Info</span>
                                        <span data-id="2">@Model.Product.Brand.Name</span>
                                    </div>
                                    <div class="tab-slides">
                                        <div id="tab-slide-1" itemprop="description" class="slide active">
                                            Product Descriptions
                                            @Model.Product.Description
                                        </div>
                                        <br>
                                        <div id="tab-slide-1" itemprop="description" class="slide active">
                                            <h2>
                                                Tags: <span>
                                                    @foreach (var item in Model.Product.ProductTags)
                                                    {
                                                        @item.Tag.Name
                                                    }
                                                </span>
                                            </h2>
                                        </div>
                                        <div id="tab-slide-2" class="slide">
                                            Tony Hunfinger
                                        </div>
                                    </div>
                                </div>
                                <div class="social-sharing-btn-wrapper">
                                    <span id="social_sharing_btn">Share</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </section>

</header>
    @*<section class="container text-center justify-content-center">
        @if (appUser != null)
        {

            <div class="LeaveC text-center">
                <div class="title">
                    <h6>LEAVE A COMMENT</h6>
                    <img src="https://cdn.shopify.com/s/files/1/0908/7252/t/4/assets/home_line.png?v=178078056696408182271627441368" alt="">
                </div>

                <div class="mid">
                    <form class="bg-light p-2" asp-action="AddComment" asp-route-id="@Model.Product.Id" method="post">
                        <div class="d-flex flex-row align-items-start">
                            <textarea class="form-control ml-1 shadow-none textarea" name="Message"></textarea>
                            <input type="hidden" name="ProductId" value="@Model.Product.Id" />
                        </div>
                        <div class="mt-2 text-right">
                            <button class="btn btn-primary btn-sm shadow-none" type="submit">Post comment</button>

                        </div>
                    </form>

                </div>
            </div>
        }
        <div class="Comment">
            
            @if (Model.Comments != null)
            {
                 <h5>COMMENTS()</h5>

                @foreach (var comment in Model.Comments)
                {

                    if (comment.AppUser.UserName == User.Identity.Name)
                    {

                        <div class="coment">
                            <div class="com">
                                <div class="Author d-flex justify-content-between mt-5">
                                    <p>@comment.AppUser.UserName ON @comment.Date.ToString("dddd MMMM yyyy HH:mm")</p>
                                    <a asp-action="DeleteComment" asp-route-id="@comment.Id" class="text-danger">Delete</a>

                                </div>
                                <p>

                                    @comment.Message
                                </p>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="coment">
                            <div class="com">
                                <div class="Author d-flex justify-content-between mt-5">
                                    <p>@comment.AppUser.UserName ON @comment.Date.ToString("dddd MMMM yyyy HH:mm")</p>
                                    <button type="button" class="btn btn-light">Reply</button>

                                </div>
                                <p>

                                    @comment.Message
                                </p>
                            </div>
                        </div>
                    }


                }
            }

        </div>
    </section>*@
